[{"categories":null,"content":"DispathcerServlet Spring Web ç®€æ˜“æ¡†æ¶ å‡†å¤‡ applicationContext.xml å¯¹åº” bean \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003cbeans\u003e \u003cbean id=\"fruitDao\" class=\"com.test.dao.FruitDao\"/\u003e \u003cbean id=\"fruitService\" class=\"com.test.service.impl.FruitServiceImpl\"\u003e \u003cproperty name=\"fruitDao\" ref=\"fruitDao\"/\u003e \u003c/bean\u003e \u003cbean id=\"fruit\" class=\"com.test.controller.FruitController\"\u003e \u003cproperty name=\"fruitService\" ref=\"fruitService\"/\u003e \u003c/bean\u003e \u003c/beans\u003e é€šè¿‡å®ç° ServletContextListener ç›‘å¬å™¨æ¥å£ï¼Œå¹¶é‡å†™ contextInitialized æ–¹æ³•è·å– BeanFactory å¯¹è±¡æ”¾å…¥ ServletContext åŸŸä¸­ // åˆ›å»º BeanFactory å¯¹è±¡ BeanFactory beanFactory = new ClassPathXmlApplicationContext(); ServletContext application = ServletContextEvent.getServletContext(); // æ”¾å…¥åº”ç”¨åŸŸæ€»ä¸­ application.setAttribute(\"beanFactory\", beanFactory); æ–°å»º BeanFactory æ¥å£ï¼Œå¹¶åˆ›å»º ClassPathXmlApplicationContext å®ç°ç±»é€šè¿‡ applicationContext.xml æ–‡ä»¶è·å–ç›¸å¯¹åº”çš„ bean // è½¬åŒ– path ä¸ºæµ InputStream is = this.getClass().getClassLoader().getResourceAsStream(path); // è·å– document å¯¹è±¡ DocumentBuildFactory dbf = DocumentBuildFactory.newInstance(); DocumentBuild db = dbf.newDocumentBuild(); Document doc = db.parse(is); éå†èŠ‚ç‚¹æ‰¾åˆ°å…ƒç´ èŠ‚ç‚¹åŠ å…¥åˆ° beanMap ä¸­ // è·å– nodeList NodeList nodeList = doc.getDocumentElement(); // å°† bean èŠ‚ç‚¹æ”¾å…¥ beanMap for (int i = 0; i \u003c nodeList.getLength(); i++) { Node node = NodeList.item(i); if (node.getNodeType() == Node.ELEMENT_NODE) { Element element = (Element) node; String id = element.getAttribute(\"id\"); String clazz = element.getAttribute(\"class\"); // åå°„è·å– class Object beanObj = Class.forName(clazz).newInstance(); beanMap.put(id, beanObj); } } å†æ¬¡å¾ªç¯è¿›è¡Œä¾èµ–æ³¨å…¥ for (int i = 0; i \u003c nodeList.getLength(); i++) { Node node = nodeList.item(i); if (node.getNodeType() == Node.ELEMENT_NODE) { // è·å–å­èŠ‚ç‚¹ property Element baseBean = (Element) node; String baseId = baseBean.getAttribute(\"id\"); NodeList childNodes = node.getChildNodes(); for (int j = 0; j \u003c childNodes.getLength(); j++) { Node property = childNodes.item(j); if (property.getNodeType() == Node.ELEMENT_NODE) { Element propertyEle = (Element) property; String name = propertyEle.getAttribute(\"name\"); String ref = propertyEle.getAttribute(\"ref\"); Object baseObj = beanMap.get(baseId); Object refObj = beanMap.get(ref); // åå°„è·å–æˆå‘˜å˜é‡ Field dependency = baseObj.getClass().getDeclaredField(name); dependency.setAccessible(true); // è®¾ç½®ä¾èµ– dependency.set(baseObj, refObj); } } } } åœ¨ DispatcherServlet ç±»ä¸­ç»§æ‰¿ HttpServlet å¹¶åœ¨ init() æ–¹æ³•ä¸­ä» ServletContext è·å– beanFactory public class DispatcherServlet implements HttpServlet { public BeanFactory beanFactory; @Override public void init () throw ServletException { ServletContext application = this.getServletContext(); Object beanFactoryObj = application.getAttribute(\"beanFactory\"); if (beanFactoryObj != null) { beanFactory = (BeanFactory) beanFactory; }else { throw new RuntimeException(\"Ioc å®¹å™¨è·å–å¤±è´¥ï¼\"); } } } åœ¨ DispatcherServlet service æ–¹æ³•ä¸­åˆ©ç”¨è¯·æ±‚ä¸­çš„ operate åå°„è·å–è°ƒç”¨æ–¹æ³•ï¼Œå¹¶é€šè¿‡ url åœ°å€ä» beanFactory è·å–æ“ä½œçš„ Controller public void service (HttpServletRequest request, HttpServletResponse response) throw ServletException, IOException, IllegalAccessException, InvocationTargetException { request.setCharacterEncoding(\"UTF-8\"); // è·å–è·¯å¾„å¹¶åˆ†å‰² String uri = request.getServletPath().substring(1); // /fruit?operate=add -\u003e fruit?.. String beanName = uri.contains(\"?\") ? uri.substring(0, uri.indexOf(\"?\") : uri); String operate = request.getParameter(\"operate\"); if (operate == null || \"\".equals(operate)) { operate = \"index\"; } // é€šè¿‡ beanName è·å–å¯¹åº”å®ä½“ç±» Object beanObj = Class.forName(beanName).newInstance(); // è·å–å¯¹åº” operate Method[] methods = beanObj.getClass().getDeclaredMethods(); for (Method method : methods) { String methodName = method.getName(); if (operate.equals(methodName)) { // è·å–å‚æ•° Parameter[] parameter = method.getParameters(); Object[] paramVal = new Object[parameter.length]; for (int i = 0; i \u003c parameters.length; i++) { if (parameters[i].getType().getName().contains(\"request\")) { paramVal[i] = request; } else if (parameters[i].getType().getName().contains(\"response\")) { paramVal[i] = response; } } method.setAccessible(true); met","date":"2022-12-05","objectID":"/dispathcerservlet/:0:0","tags":null,"title":"DispathcerServlet Spring Web ç®€æ˜“æ¡†æ¶","uri":"/dispathcerservlet/"},{"categories":null,"content":"JavaWeb å­¦ä¹ ç¬”è®° ä¸€ã€Servlet web.xml ä¸­é…ç½® servlet æ˜ å°„ \u003cservlet\u003e \u003cservlet-name\u003eAddServlet\u003c/servlet-name\u003e \u003cservlet-class\u003ecom.test.servlets.AddServlet\u003c/servlet-class\u003e \u003c/servlet\u003e \u003cservlet-mapping\u003e \u003cservlet-name\u003eAddServlet\u003c/servlet-name\u003e \u003curl-pattern\u003e/add\u003c/url-pattern\u003e \u003c/servlet-mapping\u003e ğŸ’¡ request â†’ url-pattern â†’ AddServlet â†’ servlet å¯¹åº”çš„ servlet-name â†’ æ‰¾åˆ° servlet-calss æ–¹æ³• â†’ doPost() POST æ–¹å¼ä¸‹ï¼Œè®¾ç½®ç¼–ç ï¼Œé˜²æ­¢ä¸­æ–‡ä¹±ç ã€‚GET æ–¹å¼ç›®å‰ä¸éœ€è¦è®¾ç½®ç¼–ç  ï¼ˆåŸºäº tomcat8ï¼‰ public void doPost (HttpServletRequest request, HttpServletResponse response) { request.setCharacterEncoding(\"UTF-8\"); } // tomcat 7 Get è®¾ç½®ç¼–ç  String fname = request.getParameter(\"fname\"); byte[] bytes = fname.getBytes(\"iso-8859-1\"); fname = new String(bytes, \"UTF-8\"); ğŸ’¡ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè®¾ç½®ç¼–ç å¿…é¡»æ”¾åœ¨æ‰€æœ‰è·å–å‚æ•°ä¹‹å‰ å°ç»“ ç»§æ‰¿å…³ç³»ï¼šHttpServlet â†’ GenericServlet â†’ Servlet Servlet ä¸­çš„æ ¸å¿ƒæ–¹æ³•ï¼šinit(), service(), destory() æœåŠ¡æ–¹æ³•ï¼š å½“æœ‰è¯·æ±‚è¿‡æ¥æ—¶ï¼Œservice æ–¹æ³•ä¼šè‡ªåŠ¨å“åº”ï¼ˆtomcat å®¹å™¨è°ƒç”¨ï¼‰ åœ¨ HttpServlet ä¸­ä¼šåˆ†æè¯·æ±‚æ–¹å¼ï¼Œï¼ˆGetã€Postã€Putã€Deleteï¼‰ åœ¨ HttpServlet ä¸­è°ƒç”¨ do å¼€å¤´æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•é»˜è®¤éƒ½æ˜¯ 405 éœ€è¦å­ç±»ç»§æ‰¿é‡å†™ç›¸å¯¹åº”çš„ doPostã€doGet ç­‰æ–¹æ³• Servlet åœ¨å®¹å™¨ä¸­æ˜¯ï¼šå•ä¾‹çš„ã€çº¿ç¨‹ä¸å®‰å…¨çš„ æœåŠ¡å™¨å†…éƒ¨è½¬å‘ä»¥åŠå®¢æˆ·ç«¯é‡å®šå‘ æœåŠ¡å™¨å†…éƒ¨è½¬å‘ï¼š request.getRequestDispatcher(â€â€¦â€).forward(request, response) å®¢æˆ·ç«¯é‡å®šå‘ï¼šresponse.sendRedirect(â€â€¦â€) ","date":"2022-12-05","objectID":"/javaweb/:0:0","tags":null,"title":"JavaWeb å­¦ä¹ ç¬”è®°","uri":"/javaweb/"},{"categories":null,"content":"äºŒã€Java è·å– Xml æ–‡ä»¶é‡Œçš„å‚æ•° æ ¹æ® fruit æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶ï¼šFruitControllerï¼Œè¿™ä¸ªå¯¹åº”çš„ä¾æ®æˆ‘ä»¬å­˜å‚¨åœ¨ xx.xmlä¸­ // é€šè¿‡ç±»è·å–è¾“å…¥æµ InputStream is = this.getClass().getClassLoader().getResourceAsStream(\"xx.xml\"); try { // è·å– xml é…ç½®æ–‡ä»¶ DocumentBuildFactory dbf = DocumentBuildFactory.newInstance(); DocumentBuild db = dbf.newDocumentBuild(); Document doc = db.parse(is); // é€šè¿‡ document è·å–å…ƒç´  Element element = doc.getDocumentElement(); // è·å–æ‰€æœ‰ bean èŠ‚ç‚¹ NodeList nodeList = element.getElementsByTagName(\"bean\"); for (int i = 0; i \u003c nodeList.getLength(); i++) { // è·å–æ¯ä¸€ä¸ª bean Node bean = nodeList.item(i); /* èŠ‚ç‚¹ç±»å‹æ˜¯å…ƒç´ èŠ‚ç‚¹ Xml æœ‰å…ƒç´ èŠ‚ç‚¹å’Œæ–‡æœ¬èŠ‚ç‚¹ \u003cbean\u003ehello\u003c/bean\u003e \u003cbean\u003eä¸ºå…ƒç´ èŠ‚ç‚¹ï¼Œhello ä¸ºæ–‡æœ¬èŠ‚ç‚¹ */ if (bean.getNodeType == Node.ELEMENT_NODE) { // å¼ºåˆ¶è½¬ element å¹¶è·å– id and class Element ele = (Element) bean; String id = ele.getAttribute(\"id\"); String clazz = ele.getAttribute(\"class\"); // è·å– bean ç±»ï¼ŒFruitControllerã€UserController Object beanObj = Class.forName(clazz).newInstance(); } } } ","date":"2022-12-05","objectID":"/javaweb/:1:0","tags":null,"title":"JavaWeb å­¦ä¹ ç¬”è®°","uri":"/javaweb/"},{"categories":null,"content":"ä¸‰ã€Servlet ç”Ÿå‘½å‘¨æœŸä¸­çš„æ–¹æ³• åˆå§‹åŒ–æ–¹æ³•ï¼šinit()ã€init(config) public void init(ServletConfig config) throws ServletException { this.config = config; init(); } å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨åˆå§‹åŒ–æ‰§è¡Œä¸€äº›è‡ªå®šä¹‰æ“ä½œï¼Œå¯ä»¥é‡å†™æ— å‚ init() æˆ‘ä»¬å¯ä»¥é€šè¿‡ getConfig() è·å– ServletConfig å¯¹è±¡ é€šè¿‡ config.getInitParameter() è·å–åˆå§‹åŒ–å‚æ•° - web.xml é‡Œçš„ é€šè¿‡ ServletContext è·å–é…ç½®çš„ä¸Šä¸‹æ–‡å‚æ•° ","date":"2022-12-05","objectID":"/javaweb/:2:0","tags":null,"title":"JavaWeb å­¦ä¹ ç¬”è®°","uri":"/javaweb/"},{"categories":null,"content":"DispatcherServlet å’Œ Ioc æ•´åˆï¼ŒSpring æ¡†æ¶åº•å±‚åŸç† ç®€æ˜“ç‰ˆ String æ¡†æ¶å®ç° ","date":"2022-12-05","objectID":"/javaweb/:2:1","tags":null,"title":"JavaWeb å­¦ä¹ ç¬”è®°","uri":"/javaweb/"},{"categories":null,"content":"å››ã€Filter Filter ä¹Ÿå±äº Servlet è§„èŒƒ Filter å¼€å‘æ­¥éª¤ï¼šæ–°å»ºç±»å®ç° Filter æ¥å£ï¼Œç„¶åå®ç°å…¶ä¸­çš„ä¸‰ä¸ªæ–¹æ³•ï¼šinitã€doFilterã€destory é…ç½® Filterï¼Œå¯ä»¥ç”¨æ³¨è§£@WebFilterï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ xml æ–‡ä»¶ è¿‡æ»¤å™¨é“¾ FilterChain å¦‚æœé‡‡å–çš„æ˜¯æ³¨è§£æ–¹å¼é…ç½®ï¼Œé‚£ä¹ˆè¿‡æ»¤å™¨çš„æ‹¦æˆªé¡ºåºæ˜¯æŒ‰ç…§å…¨ç±»åçš„å…ˆåé¡ºåºæ’åºçš„ å¦‚æœé‡‡å–çš„æ˜¯ xml æ–¹å¼é…ç½®ï¼Œé‚£ä¹ˆæŒ‰ç…§é…ç½®çš„å…ˆåé¡ºåºè¿›è¡Œæ’åº ","date":"2022-12-05","objectID":"/javaweb/:3:0","tags":null,"title":"JavaWeb å­¦ä¹ ç¬”è®°","uri":"/javaweb/"},{"categories":null,"content":"äº”ã€ThreadLocal ThreadLocal ç§°ä¹‹ä¸ºæœ¬åœ°çº¿ç¨‹ æˆ‘ä»¬å¯ä»¥é€šè¿‡ set() æ–¹æ³•åœ¨å½“å‰çº¿ç¨‹ä¸Šå­˜å‚¨æ•°æ®ï¼Œé€šè¿‡ get() æ–¹æ³•åœ¨å½“å‰çº¿ç¨‹ä¸Šè·å–æ•°æ® ","date":"2022-12-05","objectID":"/javaweb/:4:0","tags":null,"title":"JavaWeb å­¦ä¹ ç¬”è®°","uri":"/javaweb/"},{"categories":null,"content":"å…­ã€Listener ServletContextListener - ç›‘å¬ ServletContext å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯çš„è¿‡ç¨‹ HttpSessionListener - ç›‘å¬ HttpSession å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯çš„è¿‡ç¨‹ ServletRequestListener - ç›‘å¬ ServletRequest å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯çš„è¿‡ç¨‹ ServletContextAttributeListener - ç›‘å¬ ServletContext çš„ä¿å­˜ä½œç”¨åŸŸæ”¹åŠ¨ (addã€removeã€replace) HttpSessionAttributeListener - ç›‘å¬ HttpSession çš„ä¿å­˜ä½œç”¨åŸŸæ”¹åŠ¨ (addã€removeã€replace) ServletRequestAttributeListener - ç›‘å¬ ServletRequest çš„ä¿å­˜ä½œç”¨åŸŸæ”¹åŠ¨ (addã€removeã€replace) HttpSessionBindingListener - ç›‘å¬æŸä¸ªå¯¹è±¡åœ¨ Session åŸŸä¸­çš„åˆ›å»ºä¸ç§»é™¤ HttpSessionActivationListener - ç›‘å¬æŸä¸ªå¯¹è±¡åœ¨ Session åŸŸä¸­çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ– ","date":"2022-12-05","objectID":"/javaweb/:5:0","tags":null,"title":"JavaWeb å­¦ä¹ ç¬”è®°","uri":"/javaweb/"},{"categories":null,"content":"Hugo åšå®¢æ­å»º + ä½¿ç”¨ Github Page éƒ¨ç½²ä½œä¸ºç«™ç‚¹å¹¶ç”¨ Github Action è‡ªåŠ¨éƒ¨ç½²ç«™ç‚¹ ","date":"2022-10-09","objectID":"/how-to-build-hugo/:0:0","tags":null,"title":"Hugo åšå®¢æ­å»º + ä½¿ç”¨ Github éƒ¨ç½²ä½œä¸ºè‡ªå·±çš„ç«™ç‚¹","uri":"/how-to-build-hugo/"},{"categories":null,"content":"ä¸€ã€æ¦‚è¿° ä½œä¸ºä¸€åç¨‹åºå‘˜ï¼Œéœ€è¦æœ‰è‡ªå·±çš„åšå®¢è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ï¼Œæ‰€ä»¥è®°å½•è‡ªå·±æ­å»ºåšå®¢çš„è¿‡ç¨‹ï¼Œä»¥ä¾›å‚è€ƒã€‚ åšå®¢æ¡†æ¶é€‰æ‹©ä½¿ç”¨ Go ç¼–å†™çš„ Hugo ï¼Œå®ƒåœ¨ Github ä¸Šçš„ Star 63k ï¼Œéƒ¨ç½²åœ¨ Github Page ï¼Œæ­é… Github Action å®ç°è‡ªåŠ¨åŒ–å‘å¸ƒåšå®¢ã€‚ æ­å»ºç¯å¢ƒ: æ“ä½œç³»ç»Ÿ: Ubuntu 18.04 åšå®¢æ¡†æ¶: Hugo åšå®¢ä¸»é¢˜: LoveIt å·¥å…·: Git ","date":"2022-10-09","objectID":"/how-to-build-hugo/:1:0","tags":null,"title":"Hugo åšå®¢æ­å»º + ä½¿ç”¨ Github éƒ¨ç½²ä½œä¸ºè‡ªå·±çš„ç«™ç‚¹","uri":"/how-to-build-hugo/"},{"categories":null,"content":"äºŒã€åšå®¢æ­å»º ","date":"2022-10-09","objectID":"/how-to-build-hugo/:2:0","tags":null,"title":"Hugo åšå®¢æ­å»º + ä½¿ç”¨ Github éƒ¨ç½²ä½œä¸ºè‡ªå·±çš„ç«™ç‚¹","uri":"/how-to-build-hugo/"},{"categories":null,"content":"ï¼ˆä¸€ï¼‰Hugo æ¡†æ¶ä¸‹è½½ 1ã€é¦–å…ˆè¿›å…¥åˆ° Hugo Github ä¸‹è½½ Releases æœ€æ–°ç‰ˆæœ¬ï¼Œæˆ‘ç”¨çš„æ˜¯ v0.104.3ã€‚ æˆ‘ä¸‹è½½çš„æ˜¯ hugo_0.104.3_linux-amd64.tar.gzï¼ŒIntel ä½¿ç”¨ amd å®‰è£…åŒ…ï¼ŒAMD é€‰æ‹© arm å®‰è£…åŒ…ï¼Œwindow ç”¨æˆ·é€‰æ‹©å¯¹åº” window å®‰è£…åŒ…å³å¯ï¼Œä¸ç¡®å®šè‡ªå·±çš„ cpu æ¶æ„å¯ä»¥åœ¨ Linux ç³»ç»Ÿä¸‹è¾“å…¥ uname -m æŸ¥çœ‹ã€‚å…³äº amd ä¸ arm æ›´å¤šçŸ¥è¯†è¯·çœ‹____ã€‚ï¼ˆåŸ‹å‘ï¼‰ 2ã€ä¸‹è½½å®Œæˆåï¼Œè§£å‹ç¼©åŒ…ã€‚ mkdir hugo tar -zxvf hugo_0.104.3_linux-amd64.tar.gz -C hugo å¦‚æœæ˜¯ä¸‹è½½ tar.gz é‚£ä¹ˆéœ€è¦æ‰‹åŠ¨é…ç½® Linux ç¯å¢ƒå˜é‡ï¼Œ$PATH: åé¢è·Ÿä½  hugo ç›®å½•çš„ç»å¯¹è·¯å¾„ã€‚ echo \"export PATH=$PATH:/home/jaks/hugo\" \u003e\u003e ~/.bashrc 3ã€è¾“å…¥ hugo version æ‰“å°å‡ºç‰ˆæœ¬ä¿¡æ¯å³å®‰è£…æˆåŠŸã€‚ ","date":"2022-10-09","objectID":"/how-to-build-hugo/:2:1","tags":null,"title":"Hugo åšå®¢æ­å»º + ä½¿ç”¨ Github éƒ¨ç½²ä½œä¸ºè‡ªå·±çš„ç«™ç‚¹","uri":"/how-to-build-hugo/"},{"categories":null,"content":"ï¼ˆäºŒï¼‰Hugo æ¡†æ¶é…ç½® 1ã€åœ¨ Linux home ç›®å½•ä¸‹ä½¿ç”¨ hugo å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„ç«™ç‚¹ã€‚ hugo new site hugo-site ä¹‹åæ·»åŠ åšå®¢ä¸»é¢˜ï¼Œè¿™é‡Œæˆ‘é€‰ç”¨çš„æ˜¯ LoveIt ä¸»é¢˜ï¼Œæ›´å¤šç²¾ç¾ä¸»é¢˜å¯å‰å¾€ ä¸»é¢˜ æŸ¥çœ‹ã€‚ 2ã€è¿›å…¥ä½ çš„ hugo-site ç›®å½•ï¼Œä½¿ç”¨ Git åˆå§‹åŒ–ç›®å½•ï¼Œç„¶åä» Github ä¸‹è½½ä¸»é¢˜åˆ°ç«™ç‚¹çš„ themes ç›®å½•ã€‚ cd hugo-site git init git submodule add https://github.com/dillonzq/LoveIt.git themes/LoveIt 3ã€é…ç½®æ–‡ä»¶æ›¿æ¢ï¼Œè¿›å…¥ä¸‹è½½çš„ä¸»é¢˜æ‰¾åˆ° exampleSite ç›®å½•ä¸‹çš„ config.toml æ–‡ä»¶å¤åˆ¶åˆ° hugo-site ç›®å½•ã€‚ ","date":"2022-10-09","objectID":"/how-to-build-hugo/:2:2","tags":null,"title":"Hugo åšå®¢æ­å»º + ä½¿ç”¨ Github éƒ¨ç½²ä½œä¸ºè‡ªå·±çš„ç«™ç‚¹","uri":"/how-to-build-hugo/"},{"categories":null,"content":"ï¼ˆä¸‰ï¼‰æ·»åŠ ä¸€äº›å†…å®¹ 1ã€ä½¿ç”¨ hugo è‡ªå¸¦å‘½ä»¤åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å›ºå®šæ ¼å¼çš„ .md æ–‡ä»¶åˆ° content ç›®å½•ã€‚ hugo new posts/my-first-post.md 2ã€ä½¿ç”¨ vim æ‰“å¼€ my-first-post.md ä¼šçœ‹åˆ° draft: trueã€‚ è‰ç¨¿ä¸ä¼šè¢«éƒ¨ç½²ï¼Œä¸€æ—¦å®Œæˆæ–‡ç« ï¼Œæ›´æ–°è‰ç¨¿å¤´éƒ¨çš„ draft: false å³å¯åœ¨å‘å¸ƒåšå®¢æ—¶æ˜¾ç¤ºæ–‡ç« ã€‚ ","date":"2022-10-09","objectID":"/how-to-build-hugo/:2:3","tags":null,"title":"Hugo åšå®¢æ­å»º + ä½¿ç”¨ Github éƒ¨ç½²ä½œä¸ºè‡ªå·±çš„ç«™ç‚¹","uri":"/how-to-build-hugo/"},{"categories":null,"content":"ï¼ˆå››ï¼‰å¯åŠ¨ hugo æœåŠ¡ 1ã€ç°åœ¨å¯ä»¥å¯åŠ¨ hugo åšå®¢æŸ¥çœ‹äº†ï¼ hugo server -D | EN +------------------+----+ Pages | 10 Paginator pages | 0 Non-page files | 0 Static files | 3 Processed images | 0 Aliases | 1 Sitemaps | 1 Cleaned | 0 Total in 11 ms Watching for changes in /Users/bep/quickstart/{content,data,layouts,static,themes} Watching for config changes in /Users/bep/quickstart/config.toml Environment: \"development\" Serving pages from memory Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender Web Server is available at http://localhost:1313/ (bind address 127.0.0.1) Press Ctrl+C to stop åšå®¢åœ°å€ä¸º http://localhost:1313 åœ¨ç¼–è¾‘æˆ–è€…æ·»åŠ æ–°çš„åšå®¢æ–‡ä»¶æ—¶åªéœ€è¦åˆ·æ–°é¡µé¢å³å¯çœ‹åˆ°æ›´æ–°ã€‚ï¼ˆæœ‰æ—¶ä½ éœ€è¦ Ctrl + R å¼ºåˆ·æµè§ˆå™¨ï¼‰ã€‚ ","date":"2022-10-09","objectID":"/how-to-build-hugo/:2:4","tags":null,"title":"Hugo åšå®¢æ­å»º + ä½¿ç”¨ Github éƒ¨ç½²ä½œä¸ºè‡ªå·±çš„ç«™ç‚¹","uri":"/how-to-build-hugo/"},{"categories":null,"content":"ä¸‰ã€ä½¿ç”¨ Github ä½œä¸ºåšå®¢ç«™ç‚¹ åˆ°è¿™ä¸€æ­¥ä½ å·²ç»æˆåŠŸå®Œæˆäº† hugo åšå®¢çš„æ­å»ºï¼Œç°åœ¨éœ€è¦é€šè¿‡åŸŸåå‘å¸ƒåšå®¢è®©æ›´å¤šçš„äººçœ‹åˆ°ï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨ Github Page è¿›è¡Œåšå®¢ç«™ç‚¹çš„å‘å¸ƒï¼Œæ— éœ€ä»»ä½•è´¹ç”¨ã€‚ ","date":"2022-10-09","objectID":"/how-to-build-hugo/:3:0","tags":null,"title":"Hugo åšå®¢æ­å»º + ä½¿ç”¨ Github éƒ¨ç½²ä½œä¸ºè‡ªå·±çš„ç«™ç‚¹","uri":"/how-to-build-hugo/"},{"categories":null,"content":"ï¼ˆä¸€ï¼‰é…ç½® Github SSH key 1ã€é€šè¿‡é…ç½® ssh å³å¯æ— éœ€è¾“å…¥ è´¦å·å¯†ç å®‰å…¨è®¿é—® repoï¼Œè¿›å…¥åˆ° Linux home ç›®å½•ã€‚è¾“å…¥å¦‚ä¸‹å‘½ä»¤ç”Ÿæˆ ssh keyã€‚ 2ã€é¦–å…ˆé…ç½®å¦‚ä¸‹å‘½ä»¤ï¼Œå¦‚æœ‰é…ç½®å¯è·³è¿‡ã€‚ git config --global user.name 'xxx' git config --global user.email 'xxx@xx.xxx' 3ã€ç”Ÿæˆå¯†é’¥ã€‚ ssh-keygen -t rsa -C 'ä¸Šé¢çš„é‚®ç®±' ä»£ç å‚æ•°çš„å«ä¹‰ -t æŒ‡å®šå¯†é’¥ç±»å‹ï¼Œé»˜è®¤æ˜¯ rsaï¼Œå¯ä»¥çœç•¥ -C è®¾ç½®æ³¨é‡Šæ–‡å­—ï¼Œæ¯”å¦‚é‚®ç®± -f æŒ‡å®šå¯†é’¥æ–‡ä»¶çš„å­˜å‚¨æ–‡ä»¶å 4ã€æŒ‰å›è½¦åè¿›å…¥ .ssh è·å–å…¬é’¥ï¼Œid_rsa æ˜¯ç§é’¥ï¼Œid_rsa.pub æ˜¯å…¬é’¥ã€‚ cd ./.ssh vim id_rsa.pub 5ã€å¤åˆ¶ id_rsa.pub å…¬é’¥ï¼Œè¿›å…¥ Github è®¾ç½®è¿œç¨‹ç™»é™†ã€‚ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ Setting ã€‚ 6ã€ä¼šçœ‹åˆ°å·¦è¾¹è¿™äº›ç›®å½•ï¼Œé€‰æ‹© SSH and GPG keysã€‚ 7ã€åˆ›å»º New SSH keyï¼Œç²˜è´´ä½ çš„å…¬é’¥åˆ° key ä¸­ï¼ŒTitle å¯ä»¥éšæ„è®¾ç½®ï¼ŒKey type é»˜è®¤ç¬¬ä¸€ä¸ªå³å¯ã€‚ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æµ‹è¯•ä»¥ä¸‹é…ç½®æ˜¯å¦æˆåŠŸã€‚ ssh -T git@github.com 8ã€çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯ Github SSH key å°±é…ç½®æˆåŠŸäº†ã€‚ ","date":"2022-10-09","objectID":"/how-to-build-hugo/:3:1","tags":null,"title":"Hugo åšå®¢æ­å»º + ä½¿ç”¨ Github éƒ¨ç½²ä½œä¸ºè‡ªå·±çš„ç«™ç‚¹","uri":"/how-to-build-hugo/"},{"categories":null,"content":"ï¼ˆäºŒï¼‰åˆ›å»º Github Page é¡µé¢ 1ã€é¦–å…ˆï¼Œç™»å½•åˆ° Githubï¼Œå³ä¸Šè§’å¤´åƒé€‰æ‹© Your repositories 2ã€é€‰æ‹© New 3ã€åœ¨ Repository name ä¸€æ å¡«å†™ä½ çš„ Github åç§° + github.ioï¼Œeg: sihe-gg.github.ioã€‚æˆ‘å·²ç»åˆ›å»ºè¿‡äº†ï¼Œæ‰€ä»¥å¡«å†™äº† yourname.github.ioï¼ŒæŠŠ yourname æ¢æˆä½ çš„ github åç§°ã€‚ ","date":"2022-10-09","objectID":"/how-to-build-hugo/:3:2","tags":null,"title":"Hugo åšå®¢æ­å»º + ä½¿ç”¨ Github éƒ¨ç½²ä½œä¸ºè‡ªå·±çš„ç«™ç‚¹","uri":"/how-to-build-hugo/"},{"categories":null,"content":"ï¼ˆä¸‰ï¼‰éƒ¨ç½²åšå®¢åˆ° Github Page 1ã€åˆ›å»ºå®Œæˆä½ çš„ Github Page ä¹‹åï¼Œè¿›å…¥åˆ° Linux å‘½ä»¤è¡Œï¼Œåˆ° hugo-site ç›®å½•ä¸‹è¾“å…¥å¦‚ä¸‹å‘½ä»¤ç”Ÿæˆä½ çš„åšå®¢é¡µé¢ï¼ŒåŒæ—¶ä¹Ÿä¼šå°† ./content ä¸‹è‰ç¨¿ä¸º falseï¼ˆdraft: falseï¼‰ çš„æ–‡ç« å‘å¸ƒã€‚ hugo Start building sites â€¦ hugo v0.104.3-58b824581360148f2d91f5cc83f69bd22c1aa331 linux/amd64 BuildDate=2022-10-04T14:25:23Z VendorInfo=gohugoio | EN | ZH-CN -------------------+-----+-------- Pages | 7 | 10 Paginator pages | 0 | 0 Non-page files | 0 | 0 Static files | 108 | 108 Processed images | 0 | 0 Aliases | 1 | 2 Sitemaps | 2 | 1 Cleaned | 0 | 0 Total in 599 ms 2ã€è¿›å…¥åˆ° ./public å¯ä»¥çœ‹åˆ° hugo è‡ªåŠ¨ç”Ÿæˆçš„åšå®¢æ¡†æ¶ï¼Œæˆ‘ä»¬éœ€è¦åšçš„æ˜¯æŠŠ ./public ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ åˆ° yourname.github.io ä¸­ã€‚è¿›å…¥åˆ° ./public è¾“å…¥å¦‚ä¸‹å‘½ä»¤ã€‚ # åˆå§‹åŒ– git ä»“åº“ git init # æŒ‡å®šè¿œç¨‹ä»“åº“ git remote add origin git@github.com:yourname/yourname.github.io.git # æ·»åŠ æ‰€æœ‰æ–‡ä»¶ git add . # æäº¤ git commit -m 'åšå®¢é¡µé¢' # æ¨é€è‡³ Github git push --set-upstream origin master 3ã€å¤§åŠŸå‘Šæˆäº†ï¼Œè¾“å…¥ç½‘å€ http://yourname.github.io ï¼Œç°åœ¨å¿«å»çœ‹çœ‹ä½ çš„åšå®¢å§ï¼Œlet`s goï¼ ä½†æ˜¯ï¼å½“æˆ‘ä»¬å†™å®Œåšå®¢æ–‡ç« åï¼Œè¿˜éœ€è¦è¾“å…¥ hugo ç”Ÿæˆç½‘ç«™ï¼Œæ‰‹åŠ¨åˆ‡æ¢åˆ° ./public ç›®å½•ä¸Šä¼ ï¼Œæ“ä½œæ¯”è¾ƒç¹çï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Github Action è‡ªåŠ¨åŒ–æ“ä½œéƒ¨ç½²ã€‚ ","date":"2022-10-09","objectID":"/how-to-build-hugo/:3:3","tags":null,"title":"Hugo åšå®¢æ­å»º + ä½¿ç”¨ Github éƒ¨ç½²ä½œä¸ºè‡ªå·±çš„ç«™ç‚¹","uri":"/how-to-build-hugo/"},{"categories":null,"content":"å››ã€ä½¿ç”¨ Github Action è‡ªåŠ¨éƒ¨ç½²åšå®¢ Github Action æ˜¯ä¸€ä¸ªæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ï¼ˆCI/CDï¼‰å¹³å°ï¼Œå¯ç”¨äºè‡ªåŠ¨æ‰§è¡Œæ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ç®¡é“ï¼Œç›®å‰å·²ç»æœ‰å¾ˆå¤šå¼€å‘å¥½çš„å·¥ä½œæµï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„é…ç½®å³å¯ç›´æ¥ä½¿ç”¨ã€‚ 1ã€å†åˆ›å»ºä¸€ä¸ªä»“åº“åä¸º myBlogï¼Œå¹¶è®¾ä¸ºç§æœ‰ Private 2ã€ç°åœ¨åº”è¯¥ä¸Šä¼ æˆ‘ä»¬çš„ hugo-site ç›®å½•åˆ° myBlog ä»“åº“ï¼Œè¿›å…¥ Linux ç•Œé¢ï¼Œæ‰¾åˆ°å¹¶è¿›å…¥ä½ çš„ hugo-site ç›®å½•ï¼Œç”±äºåˆšæ‰å·²ç»ä½¿ç”¨ git init å‘½ä»¤åˆå§‹åŒ–è¿‡è¯¥ç›®å½•ï¼Œä¾æ¬¡ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ä¸Šä¼ è‡³ Github ä»“åº“ã€‚ # æŒ‡å®šè¿œç¨‹ä»“åº“ git remote add origin git@github.com:yourname/myBlog.git # æ·»åŠ æ‰€æœ‰æ–‡ä»¶ git add . # æäº¤ git commit -m 'åšå®¢ä»£ç ' # æ¨é€è‡³ Github git push --set-upstream origin master 3ã€æ¨é€å®Œæˆåï¼Œåœ¨ blog-site ç›®å½•ä¸‹æ–°å»ºç›®å½• .githubï¼Œåˆ›å»ºä¸€ä¸ªè‡ªåŠ¨åŒ–å‘å¸ƒåšå®¢çš„ .yml é…ç½®æ–‡ä»¶ã€‚ mkdir .github/workflows cd ./.github/workflows vim myAction.yml 4ã€åœ¨ myAction.yml é…ç½®æ–‡ä»¶ä¸­å¡«å†™å¦‚ä¸‹ä¿¡æ¯ã€‚ name: github pages # on æ˜¯ Actions çš„è§¦å‘æ¡ä»¶ï¼Œè¿™é‡Œçš„é…ç½®è¯´æ˜å½“ master åˆ†æ”¯æœ‰æäº¤çš„æ—¶å€™ï¼Œæ ¹æ®è¿™ä¸ªé…ç½®æ–‡ä»¶æ‰§è¡Œ on: push: branches: - main # Set a branch to deploy # jobs æ˜¯è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæˆ‘ä»¬çœ‹åˆ°ä»–è¦æ‰§è¡Œ deploy jobs: deploy: runs-on: ubuntu-18.04 # è¿è¡Œç¯å¢ƒ steps: # æ‰§è¡Œæ­¥éª¤ # checkout åˆ†æ”¯ - uses: actions/checkout@v2 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod # å®‰è£… hugo - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: 'latest' # extended: true # ç¼–è¯‘ç«™ç‚¹ - name: Build run: hugo # åˆ›å»º CNAMEï¼Œè¿™ä¸ªæ˜¯åŸå§‹é…ç½®ä¸­æ²¡æœ‰çš„ #- uses: \"finnp/create-file-action@master\" # env: # FILE_NAME: \"./public/CNAME\" # FILE_DATA: \"h1z3y3.me\" # å°†ç«™ç‚¹å‘å¸ƒåˆ°å¯¹åº”åˆ†æ”¯ - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: github_token: ${{ secrets.PERSONAL_TOKEN }} EXTERNAL_REPOSITORY: yourname/yourname.github.io PUBLISH_BRANCH: main publish_dir: ./public 5ã€åœ¨é…ç½®æ–‡ä»¶ä¸­éœ€è¦ä¿®æ”¹çš„æ˜¯ on: push: branches: - main # è¿™é‡Œä¿®æ”¹ä¸º myBlog çš„ä¸»åˆ†æ”¯åç§° å¦‚ä¸Šå›¾ï¼Œæˆ‘çš„ branches éœ€è¦ä¿®æ”¹ä¸º main â†’ masterã€‚ jobs: deploy: - name: Deploy EXTERNAL_REPOSITORY: å¡«å†™åˆšæ‰åˆ›å»ºçš„ Github Page åº“åœ°å€ PUBLISH_BRANCHï¼š å¦‚ä¸Šå›¾æŸ¥çœ‹ä¸»åˆ†æ”¯åç§°å¡«å†™ 6ã€è¿˜å·®ä¸€æ­¥ï¼Œç”³è¯· Github token è¿›å…¥ Githubï¼Œå³ä¸Šè§’å¤´åƒ â†’ setting å·¦è¾¹èœå•æ é€‰æ‹©æœ€åº•éƒ¨ Developer settings â†’ Personal access tokens é€‰æ‹© Generate new tokenï¼Œå†æ¬¡è¾“å…¥å¯†ç åï¼Œè¿›å…¥é¡µé¢ï¼Œæ³¨æ„ï¼šéœ€è¦åœ¨ Select scopes ä¸­å‹¾é€‰ repo å’Œ workflowï¼ŒExpiration è¿‡æœŸæ—¥æœŸå†™çš„é•¿ä¸€ç‚¹ã€‚ ç‚¹å‡» Generate tokenï¼Œå¤åˆ¶æ–°ç”Ÿæˆçš„ tokenï¼Œæ³¨æ„ï¼šåªæ˜¾ç¤ºä¸€æ¬¡ï¼Œä¸è¦å¼„ä¸¢ã€‚ è¿›å…¥ myBlog é¡µé¢ï¼Œç‚¹å‡» Settings é€‰æ‹© Secrets â†’ Actions â†’ New repository secret Name å¡«å†™ PERSONAL_TOKENï¼ŒSecret å¡«å†™åˆšåˆšç”³è¯·çš„ token 7ã€æœ€åï¼Œåªéœ€è¦ç”¨å¦‚ä¸‹ git å‘½ä»¤ä¸Šä¼ åˆ° myBlog åº“ä¸­ï¼Œæ¯æ¬¡å†™å®Œåšå®¢æ–‡ç«  git push æ¨é€å®Œæˆåå°±å¯ä»¥è‡ªåŠ¨æ‰§è¡Œ hugo å‘½ä»¤ï¼Œç”Ÿæˆåœ¨ public ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ è‡³ä½ çš„ Github Pageï¼Œè‡ªåŠ¨åŒ–ç”Ÿæˆä½ çš„åšå®¢ç½‘é¡µã€‚ git add . git commit -m 'upload action config' git push è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ Hugo åšå®¢å°±æ­å»ºå®Œæˆäº†ï¼Œæ¯å½“æˆ‘ä»¬é€šè¿‡ Markdown è¯­æ³•å®Œæˆåšå®¢å†…å®¹ç¼–è¾‘åï¼Œåªéœ€è¦æ¨é€è‡³ç§äººä»“åº“ï¼Œç­‰å¾…å‡ åˆ†é’Ÿï¼Œ Github Action å°±ä¼šè‡ªåŠ¨åŒ–å‘å¸ƒä½ çš„åšå®¢ï¼Œå†é€šè¿‡ Github Page ä¸Šä½ çš„åŸŸåå»è®¿é—®æ›´æ–°åçš„åšå®¢ã€‚ ","date":"2022-10-09","objectID":"/how-to-build-hugo/:4:0","tags":null,"title":"Hugo åšå®¢æ­å»º + ä½¿ç”¨ Github éƒ¨ç½²ä½œä¸ºè‡ªå·±çš„ç«™ç‚¹","uri":"/how-to-build-hugo/"}]